# File: AI-testing/scripts/setup_llm_pentest.sh

- Size: 14114 bytes
- Kind: text
- SHA256: 37f69c7391410a7e21c0ac75f653a8bc2a9b4fba980e63e09fcb6dad6df4f472

## Head (first 60 lines)

```
#!/bin/bash
# Complete setup for LLM-Orchestrated Penetration Testing Platform

set -e

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PROJECT_ROOT="$( cd "$SCRIPT_DIR/.." && pwd )"

echo "=============================================="
echo "LLM-Orchestrated Penetration Testing Platform"
echo "=============================================="
echo ""
echo "This will set up a complete AI-driven pentest system where:"
echo "1. An LLM controls the entire testing process"
echo "2. Remote agents execute commands on target networks"
echo "3. The orchestrator manages workflow and results"
echo ""

# Check prerequisites
echo "Checking prerequisites..."
command -v docker >/dev/null 2>&1 || { echo "Docker is required but not installed. Aborting." >&2; exit 1; }
command -v docker-compose >/dev/null 2>&1 || command -v docker compose >/dev/null 2>&1 || { echo "Docker Compose is required but not installed. Aborting." >&2; exit 1; }

# 1. Fix catalog structure first
echo ""
echo "Step 1: Setting up catalog structure..."
echo "----------------------------------------"
bash "${SCRIPT_DIR}/fix_catalog_setup.sh"

# 2. Run enhanced features setup
echo ""
echo "Step 2: Installing enhanced features..."
echo "----------------------------------------"
if [ -f "${SCRIPT_DIR}/enable_enhanced_features.sh" ]; then
    bash "${SCRIPT_DIR}/enable_enhanced_features.sh"
else
    echo "Enhanced features script not found, skipping..."
fi

# 3. Create LLM orchestrator integration
echo ""
echo "Step 3: Setting up LLM orchestrator..."
echo "----------------------------------------"

# Create router for LLM controller
cat > "${PROJECT_ROOT}/orchestrator/routers/llm_controller.py" << 'EOF'
"""
Router for LLM Controller Integration
"""
from fastapi import APIRouter, Depends, HTTPException, BackgroundTasks
from pydantic import BaseModel
from typing import Dict, Any, List, Optional
import asyncio
import logging

from ..llm_controller import LLMOrchestrator, TestPhase, AgentCommand
from ..auth import get_current_tenant

router = APIRouter(prefix="/v2/llm", tags=["llm_controller"])
logger = logging.getLogger(__name__)
```

## Tail (last 60 lines)

```
    print(f"Active agents: {orchestrator.active_agents}")
    
    # Run test
    report = await orchestrator.run_penetration_test()
    
    print("\nTest Complete!")
    print(f"Services discovered: {len(report['technical_findings']['services_discovered'])}")
    print(f"Vulnerabilities found: {len(report['technical_findings']['vulnerabilities'])}")
    print(f"Risk assessment: {report['risk_assessment']['overall_risk']}")
    
    await orchestrator.cleanup()

if __name__ == "__main__":
    asyncio.run(test_basic_scan())
EOF

chmod +x "${PROJECT_ROOT}/test_llm_pentest.py"
echo "✓ Test script created"

# 7. Final summary
echo ""
echo "=============================================="
echo "Setup Complete!"
echo "=============================================="
echo ""
echo "Your LLM-Orchestrated Penetration Testing Platform is ready!"
echo ""
echo "Architecture:"
echo "  • LLM Brain: Controls entire testing process"
echo "  • Orchestrator: Manages agents and workflow"
echo "  • Remote Agents: Execute commands on target networks"
echo "  • Automated Workflow: Recon → Enum → Vuln → Exploit → Report"
echo ""
echo "Next steps:"
echo ""
echo "1. Configure your LLM provider in .env.llm:"
echo "   - Set OPENAI_API_KEY for GPT-4"
echo "   - Or ANTHROPIC_API_KEY for Claude"
echo "   - Or LOCAL_LLM_URL for local models"
echo ""
echo "2. Start the platform:"
echo "   ./start_llm_pentest.sh"
echo ""
echo "3. Deploy agents on target networks:"
echo "   - Kali Linux: Use scripts/install_kali_os_agent.sh"
echo "   - Docker: Use the agent containers"
echo "   - Windows/Linux: Deploy raw agents"
echo ""
echo "4. Run an LLM-controlled test:"
echo "   python test_llm_pentest.py"
echo ""
echo "=============================================="
echo "⚠️  SECURITY REMINDERS:"
echo "=============================================="
echo "• ALWAYS get written authorization before testing"
echo "• Keep ALLOW_EXPLOITATION=0 unless explicitly authorized"
echo "• Use read-only credentials for cloud scanning"
echo "• Monitor LLM decisions - it controls real tools!"
echo "• Test in isolated environments first"
echo "=============================================="
```

